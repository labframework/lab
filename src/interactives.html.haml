!!! 5
%html
  %head
    %meta{:content => "text/html;charset=utf-8", "http-equiv" => "Content-Type"}/
    %meta{:content => "IE=edge,chrome=1", "http-equiv" => "X-UA-Compatible"}/
    %title Lab Interactive Browser
    = FONTFACE_LINK
    %link{:href => "vendor/codemirror/lib/codemirror.css", :rel => "stylesheet", :type => "text/css"}/
    %link{:href => "vendor/jquery-ui/jquery-ui.css", :rel => "stylesheet", :type => "text/css"}/
    %link{:href => "vendor/jquery-context-menu/jquery.contextMenu.css", :rel => "stylesheet", :type => "text/css"}/
    %link{:href => "vendor/jquery-selectBoxIt/jquery.selectBoxIt.css", :rel => "stylesheet", :type => "text/css"}/
    %link{:href => "interactives.css", :rel => "stylesheet", :type => "text/css"}/
    %script{:src => "vendor/modernizr/modernizr.js", :type => "text/javascript"}
    %script{:type => "text/javascript"}
      if (!Modernizr.svg) { window.location = 'browser-upgrade.html'; }
    = LAB_JS_DEPENDENCIES
    = LAB_JS_ADDITIONAL_DEPENDENCIES
    = ANALYTICS
  %body
    #header
      %a#logo{:href => "http://www.concord.org/"}
        %img{:src => "resources/layout/lab-logo.png"}/
      .row
        %h1<
          %a(href='index.html')> Lab
          \:
          %a(href="") Interactive Browser

        %span.title additional links:
        %a#embeddable-link{:href => "embeddable.html", :class => "opens-in-new-window", :target => "_blank"} Embeddable
        %a#datagames-link{:href => "embeddable.html", :class => "opens-in-new-window", :target => "_blank"} DataGames
        %a#datagames-staging-link{:href => "embeddable.html", :class => "opens-in-new-window", :target => "_blank"} DataGames (Staging)
        %a#original-import-link{:href => "", :class => "opens-in-new-window", :target => "_blank"} Original Imported Model

      .row
        %span.title select Interactive:
        %select#select-interactive
        %form#render-controls.controls
          %span.title render in:
          %label{:for => 'render-in-iframe'}
            iframe
            %input#render-in-iframe.serialize{:type => :checkbox, :name => 'render-in-iframe', :checked => 'checked'}
          %span.title size:
          %select#select-interactive-size.serialize{:name => "select-interactive-size"}
            %option{:value => "tiny"} tiny
            %option{:value => "small"} small
            %option{:value => "medium-small", :selected => "selected"} medium-small
            %option{:value => "medium", :selected => "selected"} medium
            %option{:value => "large"} large

      .row
        %form#interactive-controls
          #select-filters.controls
            %span.title categories:
            %label{:for => 'curriculum-filter'}
              Curriculum
              %input#curriculum-filter.serialize{:type => :checkbox, :name => 'curriculum-filter', :checked => 'checked'}
            %label{:for => 'examples-filter'}
              Examples
              %input#examples-filter.serialize{:type => :checkbox, :name => 'examples-filter'}
            %label{:for => 'tests-filter'}
              Tests
              %input#tests-filter.serialize{:type => :checkbox, :name => 'tests-filter'}
            %label{:for => 'benchmarks-filter'}
              Benchmarks
              %input#benchmarks-filter.serialize{:type => :checkbox, :name => 'benchmarks-filter'}

            %span.title publication status:
            %label{:for => 'public'}
              Public
              %input#public.serialize{:type => :checkbox, :name => 'public', :checked => "checked"}
            %label{:for => 'draft'}
              Draft*
              %input#draft.serialize{:type => :checkbox, :name => 'draft'}
            %label{:for => 'broken'}
              Broken**
              %input#broken.serialize{:type => :checkbox, :name => 'broken'}

    #interactive-header
      #interactive-forward-back
        %span#run-benchmarks-button.arrow Run Benchmarks
        %span#previous-interactive.arrow previous
        %span#next-interactive.arrow next
      #interactive-title
    #interactive-error-dialog
    #content.standard-interactive-layout
      #responsive-content
        #interactive-container{:tabindex => 0}
        #firefox-warning-pane.warning-pane
          %p
            %a(href='http://blog.concord.org/serious-performance-regression-in-firefox-18-and-newer' class='opens-in-new-window' target='_blank') Firefox v18-22 performance issue ...
    #extras-bottom
      #extras-bottom-banner Extras

      %ul#sortable-extras.sortable
        %li#editor.extras-item.ui-state-default
          .extras-item-banner
            %input#show-editor{:type => "checkbox", :checked => false}
            %label{:for => "show-editor"} Interactive Editor
          #editor-content.extras-item-content
            .extras-item-controls
              %button#update-interactive-button Update Interactive
              %button#update-json-from-interactive-button Update JSON from Interactive
              %a#json-interactive-link{:href => "", :class => "opens-in-new-window", :target => "_blank"} Interactive JSON
              %input#edit-mode{:type => "checkbox", :checked => false}
              %label{:for => "edit-mode"} Edit Mode
              %button.right#autoformat-interactive-json-button AutoFormat
            %textarea#interactive-text-area

        %li#model-editor.extras-item.ui-state-default
          .extras-item-banner
            %input#show-model-editor{:type => "checkbox", :checked => false}
            %label{:for => "show-model-editor"} Model Editor
          #model-editor-content.extras-item-content
            .extras-item-controls
              %button#update-model-button Update Model
              %button#update-json-from-model-button Update JSON from Model
              %a#json-model-link{:href => "", :class => "opens-in-new-window", :target => "_blank"} Model JSON
              %a#original-model-link{:href => "",  :class => "opens-in-new-window", :target => "_blank"} Original Model
              %button.right#autoformat-model-json-button AutoFormat
            %textarea#model-text-area

        %li#model-energy-graph.extras-item.ui-state-default
          .extras-item-banner
            %input#show-model-energy-graph{:type => "checkbox", :checked => false}
            %label{:for => "show-model-energy-graph"} Energy Graph
          #model-energy-graph-content.extras-item-content
            #model-energy-graph-chart.ke-chart.graph

        %li#model-datatable.extras-item.ui-state-default
          .extras-item-banner
            %input#show-model-datatable{:type => "checkbox", :checked => false}
            %label{:for => "show-model-datatable"} Atoms Datatable
          #model-datatable-content.extras-item-content
            #model-datatable-stats.extras-item-controls
            .model-datatable-results
              %table#model-datatable-results
                %thead
                %tbody

        %li#benchmark.extras-item.ui-state-default
          .extras-item-banner
            %input#show-benchmarks{:type => "checkbox", :checked => false}
            %label{:for => "show-benchmarks"} Benchmarks
          #benchmarks-content.extras-item-content
            .extras-item-controls
              .extras-item-description
                Collect performance data by running 100 steps: first just the graphics, then
                just the model, and finally the model and graphics together.
                First row contains averaged values from all runs.
            %button#submit-benchmarks-button{:disabled => "disabled"} Submit Data
            %span#submit-success
            .small
              Note: Some identifying information will be sent along with your benchmark data. To see more
              %a#show-browser-submission-info{:href => "#"} click here.
            #browser-submission-info
              %p
                In order to measure performance over time, we save a semi-unique "fingerprint" of
                each browser that runs the benchmarks. This allows us to look at performance over
                time of models running in a single user's browser.
              %p
                To do this, we log a number of identifying pieces on information about your
                browser, such as the browser's userAgent, language settings, colorDepth, etc. This
                information is then hashed into a single number.
              %p
                The unique fingerprint for your browser is
                %span#browser-fingerprint
              %p
                It may be possible to use this information to uniquely identify your browser
                elsewhere on the web. If you prefer that this information is not submitted, please
                do not hit the Submit button.
              %p
                This funationality uses the
                %a{:href => "https://github.com/Valve/fingerprintjs"} fingerprintjs
                library.

            .model-benchmark-results
              %table#model-benchmark-results.model-benchmark-results

        %li#snapshot.extras-item.ui-state-default
          .extras-item-banner
            %input#show-snapshot{:type => "checkbox", :checked => false}
            %label{:for => "show-snapshot"}
              %i.icon-camera-retro
              SnapShots
          #snapshot-content.extras-item-content
            .extras-item-controls
              %button#export_interactive
                snapshot interactive
            .extras-item-description
              take a screen capture of your model or interactive.
            #image_output
              (no snapshot taken yet)

    = LAB_JS
    = LAB_SHUTTERBUG
    = LAB_MODEL_LIST
    %script{:src => "application.js", :type => "text/javascript"}

